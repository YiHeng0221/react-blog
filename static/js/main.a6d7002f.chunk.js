(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{40:function(n,e,t){"use strict";t.r(e);var i,o,r,c,a,s=t(1),d=t.n(s),b=t(23),l=t.n(b),j=t(4),u=t(2),x=t(3),f=t(8),p=t(5),h=Object(s.createContext)(null),O=Object(s.createContext)(null),m=Object(s.createContext)(null),g="token",v=function(n){localStorage.setItem(g,n)},w=function(){return localStorage.getItem(g)},y="@media screen and (max-width: 768px)",k="@media screen and (max-width: 576px)",z=t(0),S=x.a.button(i||(i=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: space-around;\n  align-items: center;\n  margin: 10px auto;\n  width: 2rem;\n  height: 2rem;\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  padding: 0;\n  z-index: 10;\n  &:focus {\n    outline: none;\n  }\n  div {\n    width: 2rem;\n    height: 0.25rem;\n    border-radius: 10px;\n    background: #495464;\n    transition: all 0.3s linear;\n    position: relative;\n    transform-origin: 1px;\n    :first-child {\n      transform: ",";\n    }\n\n    :nth-child(2) {\n      opacity: ",";\n      transform: ",";\n    }\n\n    :nth-child(3) {\n      transform: ",";\n    }\n  }\n"])),(function(n){return n.open?"rotate(45deg)":"rotate(0)"}),(function(n){return n.open?"0":"1"}),(function(n){return n.open?"translateX(20px)":"translateX(0)"}),(function(n){return n.open?"rotate(-45deg)":"rotate(0)"})),C=x.a.div(o||(o=Object(u.a)(["\n  width: 100%;\n"]))),P=x.a.div(r||(r=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  z-index: 99;\n  width: 100%;\n"]))),L=Object(x.a)(f.b)(c||(c=Object(u.a)(["\n  text-decoration: none;\n  background: white;\n  border-bottom: 1px solid #e8e8e8;\n  width: 100%;\n  display: flex;\n  font-size: 1em;\n  align-items: center;\n  padding: 10px 0;\n  justify-content: center;\n  cursor: pointer;\n  color: #495464;\n  transition: all 0.3s;\n\n  :hover {\n    background: #e8e8e8;\n    cursor: pointer;\n    color: #000000;\n  }\n"]))),E=x.a.div(a||(a=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),D=function(){var n=Object(p.g)(),e=Object(s.useContext)(h),t=e.user,i=e.setUser,o=Object(p.f)();return Object(z.jsxs)(P,{children:[Object(z.jsx)(L,{to:"/posts",$active:"/posts"===n.pathname,children:"\u6240\u6709\u6587\u7ae0"}),t&&Object(z.jsx)(L,{to:"/newPost",$active:"/newPost"===n.pathname,children:"\u65b0\u589e\u6587\u7ae0"}),Object(z.jsx)(L,{to:"/board",$active:"/board"===n.pathname,children:"\u7559\u8a00\u677f"}),!t&&Object(z.jsxs)(E,{children:[Object(z.jsx)(L,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),Object(z.jsx)(L,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"})]}),t&&Object(z.jsx)(E,{children:Object(z.jsx)(L,{to:"/",onClick:function(){v(""),i(null),"/"!==n.pathname&&o.push("/")},children:"\u767b\u51fa"})})]})};function $(){var n=Object(s.useState)(!1),e=Object(j.a)(n,2),t=e[0],i=e[1];return Object(z.jsxs)(C,{children:[Object(z.jsxs)(S,{onClick:function(){i(!t)},open:t,children:[Object(z.jsx)("div",{}),Object(z.jsx)("div",{}),Object(z.jsx)("div",{})]}),t&&Object(z.jsx)(D,{})]})}var T,I,_,A,B,J,Y,U,F=function(){var n=Object(s.useState)(""),e=Object(j.a)(n,2),t=e[0],i=e[1],o=function(){window.innerWidth>768?i("PC"):window.innerWidth>576?i("tablet"):i("mobile")};return Object(s.useEffect)((function(){return window.addEventListener("resize",o),o(),function(){window.removeEventListener("resize",o)}}),[]),t},N=x.a.div(T||(T=Object(u.a)(["\n  z-index: 10;\n  display: flex;\n  position: fixed;\n  justify-content: space-around;\n  align-items: center;\n  top: 0;\n  right: 0;\n  left: 0;\n  border-bottom: 1px solid lightgrey;\n  background: white;\n  "," {\n    flex-direction: column;\n    justify-content: space-evenly;\n    align-items: center;\n    height: 128px;\n  }\n  "," {\n    justify-content: start;\n    align-items: center;\n    height: 100px;\n  }\n"])),y,k),H=x.a.div(I||(I=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  "," {\n    font-size: 0.8em;\n  }\n"])),y),W=Object(x.a)(f.b)(_||(_=Object(u.a)(["\n  margin: 0 10px;\n  display: flex;\n  align-items: center;\n  font-size: 2em;\n  cursor: pointer;\n  color: #495464;\n  text-decoration: none;\n"]))),X=Object(x.a)(f.b)(A||(A=Object(u.a)(["\n  text-decoration: none;\n  padding: 10px;\n  margin: 0 10px;\n  display: flex;\n  font-size: 1em;\n  cursor: pointer;\n  border-radius: 5px;\n  color: #495464;\n  transition: all 0.3s;\n  :hover {\n    background: #e8e8e8;\n    cursor: pointer;\n    color: #000000;\n    transform: scale(1.2);\n  }\n  ","\n"])),(function(n){return n.$active&&"\n  background: #e8e8e8;\n  "})),M=x.a.div(B||(B=Object(u.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 20px;\n  color: #495464;\n"])));function R(){var n=Object(p.g)(),e=Object(s.useContext)(h),t=e.user,i=e.setUser,o=Object(p.f)(),r=F();return Object(z.jsxs)(N,{children:[Object(z.jsx)(W,{to:"/",children:"Heng's Blog"}),"mobile"===r&&Object(z.jsx)($,{}),("tablet"===r||"PC"===r)&&Object(z.jsxs)(H,{children:[Object(z.jsx)(X,{to:"/posts",$active:"/posts"===n.pathname,children:"\u6240\u6709\u6587\u7ae0"}),t&&Object(z.jsx)(X,{to:"/newPost",$active:"/newPost"===n.pathname,children:"\u65b0\u589e\u6587\u7ae0"}),Object(z.jsx)(X,{to:"/board",$active:"/board"===n.pathname,children:"\u7559\u8a00\u677f"}),Object(z.jsxs)("div",{children:[!t&&Object(z.jsxs)(M,{children:[Object(z.jsx)(X,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),Object(z.jsx)(X,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"})]}),t&&Object(z.jsx)(M,{children:Object(z.jsx)(X,{to:"/",onClick:function(){v(""),i(null),"/"!==n.pathname&&o.push("/")},children:"\u767b\u51fa"})})]})]})]})}var Z,q,G,K,Q,V,nn,en=x.a.div(J||(J=Object(u.a)(["\n  z-index: 99;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.7);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3em;\n"]))),tn=Object(x.b)(Y||(Y=Object(u.a)(["\n  0%, 100% {\n    animation-timing-function: cubic-bezier(0.5, 0, 1, 0.5);\n  }\n  0% {\n    transform: rotateY(0deg);\n  }\n  50% {\n    transform: rotateY(1800deg);\n    animation-timing-function: cubic-bezier(0, 0.5, 0.5, 1);\n  }\n  100% {\n    transform: rotateY(3600deg);\n  }\n"]))),on=x.a.div(U||(U=Object(u.a)(["\ndisplay: inline-block;\ntransform: translateZ(1px);\n  animation: "," 5s linear infinite;\n  div {\n    display: inline-block;\n  width: 64px;\n  height: 64px;\n  margin: 8px;\n  border-radius: 50%;\n  background: #fff;\n  animation: lds-circle 2.4s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n}\n    }\n    :nth-child(2) {\n      top: 8px;\n      left: 32px;\n      animation-delay: -0.4s;\n    }\n    :nth-child(3) {\n      top: 8px;\n      left: 56px;\n      animation-delay: -0.8s;\n    }\n    :nth-child(4) {\n      top: 32px;\n      left: 8px;\n      animation-delay: -0.4s;\n    }\n    :nth-child(5) {\n      top: 32px;\n      left: 32px;\n      animation-delay: -0.8s;\n    }\n    :nth-child(6) {\n      top: 32px;\n      left: 56px;\n      animation-delay: -1.2s;\n    }\n    :nth-child(7) {\n      top: 56px;\n      left: 8px;\n      animation-delay: -0.8s;\n    }\n    :nth-child(8) {\n      top: 56px;\n      left: 32px;\n      animation-delay: -1.2s;\n    }\n    :nth-child(9) {\n      top: 56px;\n      left: 56px;\n      animation-delay: -1.6s;\n    }\n  }\n"])),tn);function rn(){return Object(z.jsx)(en,{children:Object(z.jsx)(on,{children:Object(z.jsx)("div",{})})})}var cn=x.a.div(Z||(Z=Object(u.a)(["\n  position: relative;\n  max-width: 645px;\n  margin: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  transition-duration: 0.5s;\n  :hover {\n    background: #e8e8e8;\n    cursor: pointer;\n    color: #000000;\n    transform: scale(1.2);\n  }\n"]))),an=x.a.div(q||(q=Object(u.a)(["\n  display: block;\n  text-decoration: none;\n  line-height: 1.8em;\n  color: #495464;\n  font-size: 1.5em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  margin-right: 0;\n  font-weight: bold;\n  "," {\n    font-size: 0.8em;\n  }\n"])),y),sn=x.a.div(G||(G=Object(u.a)(["\n  background: #495464;\n  color: #f4f4f2;\n  margin-bottom: 10px;\n  "," {\n    font-size: 0.5em;\n  }\n"])),y),dn=x.a.div(K||(K=Object(u.a)(["\n  margin: 0 20px;\n"]))),bn={textDecoration:"none"},ln=x.a.div(Q||(Q=Object(u.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),jn=Object(x.a)(f.b)(V||(V=Object(u.a)(['\n  text-decoration: none;\n  line-height: 1.5em;\n  color: #495464;\n  display: block;\n  font-size: 1em;\n  margin: 0.5em;\n  box-sizing: border-box;\n  font-weight: bold;\n  textdecoration: "none";\n  '," {\n    font-size: 0.5em;\n  }\n"])),y),un=x.a.div(nn||(nn=Object(u.a)(["\n  min-width: 4em;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 1em;\n  background-color: #f38181;\n  border-radius: 10px;\n  padding: 0.5em;\n  color: white;\n  cursor: pointer;\n  "," {\n    font-size: 0.5em;\n  }\n"])),y);function xn(n){var e=n.post,t=n.handleDeletePost,i=Object(s.useContext)(h).user;return Object(z.jsx)(cn,{children:Object(z.jsxs)(ln,{children:[Object(z.jsx)(jn,{to:"/post/".concat(e.id),children:e.title}),i&&i.id===e.userId&&Object(z.jsx)(un,{onClick:function(){return t(e.id)},children:"\u522a\u9664"})]})},e.id)}function fn(n){var e=n.post;return Object(z.jsx)(cn,{children:Object(z.jsxs)(f.b,{to:"/post/".concat(e.id),style:bn,children:[Object(z.jsx)(an,{children:e.title}),Object(z.jsx)(sn,{children:Object(z.jsx)(dn,{children:new Date(e.createdAt).toLocaleString()})})]})},e.id)}var pn,hn,On,mn,gn,vn=t(7),wn=t.n(vn),yn=x.a.div(pn||(pn=Object(u.a)(["\n  margin-top: 256px;\n  width: 645px;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  opacity: 100%;\n  background-color: white;\n  min-height: 300px;\n  overflow: scroll;\n"]))),kn=x.a.div(hn||(hn=Object(u.a)(["\n  text-decoration: none;\n  line-height: 1.8em;\n  color: #495464;\n  display: block;\n  font-size: 1.5em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  margin-right: 0;\n  font-weight: bold;\n"]))),zn=x.a.div(On||(On=Object(u.a)(["\n  background: #495464;\n  color: #f4f4f2;\n  margin-bottom: 10px;\n"]))),Sn=x.a.a(mn||(mn=Object(u.a)(["\n  margin: 0 20px;\n"]))),Cn=x.a.div(gn||(gn=Object(u.a)(["\n  line-height: 2em;\n"])));function Pn(){var n=Object(s.useContext)(O),e=n.newPostTitle,t=n.newPostBody,i=(new Date).toLocaleString();return Object(z.jsx)(wn.a,{children:Object(z.jsxs)(yn,{children:[Object(z.jsx)(kn,{children:e}),Object(z.jsx)(zn,{children:Object(z.jsx)(Sn,{children:i})}),Object(z.jsx)(Cn,{children:t})]})})}var Ln,En,Dn,$n,Tn,In,_n,An=t(14),Bn=t.n(An),Jn=t(17),Yn="https://student-json-api.lidemy.me",Un=function(n){return n?fetch("".concat(Yn,"/posts?_sort=createdAt&_order=desc&_limit=").concat(n)).then((function(n){return n.json()})):fetch("".concat(Yn,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},Fn=function(){var n=Object(Jn.a)(Bn.a.mark((function n(e){var t,i;return Bn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(Yn,"/posts?id=").concat(e));case 2:return t=n.sent,n.next=5,t.json();case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Nn=function(){var n=w();return fetch("".concat(Yn,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},Hn=function(){return fetch("".concat(Yn,"/comments?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},Wn=t(12),Xn=t.n(Wn);function Mn(){var n=Object(s.useState)([]),e=Object(j.a)(n,2),t=e[0],i=e[1],o=Object(s.useContext)(m),r=o.isLoading,c=o.setIsLoading;return Object(s.useEffect)((function(){c(!0),Un(5).then((function(n){i(n)})).then((function(){c(!1)}))}),[c]),Object(z.jsxs)(wn.a,{children:[r&&Object(z.jsx)(rn,{}),t.map((function(n){return Object(z.jsx)(fn,{post:n},n.id)}))]})}fn.propTypes={post:Xn.a.object};var Rn,Zn,qn,Gn,Kn,Qn,Vn=x.a.div(Ln||(Ln=Object(u.a)(["\n  width: 100%;\n  margin: 0 auto;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  color: #495464;\n  display: flex;\n  justify-content: center;\n"]))),ne=x.a.form(En||(En=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 645px;\n  margin: 30px;\n"]))),ee=x.a.div(Dn||(Dn=Object(u.a)(["\n  align-self: center;\n  font-size: 1em;\n  margin: 1em;\n  border: 2px solid#ffffff;\n  :active {\n    outline: 0;\n  }\n"]))),te=x.a.button($n||($n=Object(u.a)(["\n  width: 50%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),ie=x.a.div(Tn||(Tn=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-item: center;\n"]))),oe=Object(x.a)(f.b)(In||(In=Object(u.a)(["\n  width: 50%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  text-align: center;\n  text-decoration: none;\n  color: black;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),re=x.a.a(_n||(_n=Object(u.a)(["\n  font-size: 1em;\n  color: red;\n  align-self: center;\n"])));function ce(){var n=Object(s.useContext)(h).setUser,e=Object(s.useState)(""),t=Object(j.a)(e,2),i=t[0],o=t[1],r=Object(s.useState)(""),c=Object(j.a)(r,2),a=c[0],d=c[1],b=Object(s.useState)(),l=Object(j.a)(b,2),u=l[0],x=l[1],f=Object(p.f)();return Object(z.jsx)(wn.a,{children:Object(z.jsx)(Vn,{children:Object(z.jsxs)(ne,{onSubmit:function(e){x(null),function(n,e){return fetch("".concat(Yn,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(i,a).then((function(e){if(0===e.ok)return x(e.message);v(e.token),Nn().then((function(e){if(1!==e.ok)return v(null),x(e.toString());n(e.data),f.push("/")}))}))},children:[Object(z.jsxs)(ee,{children:["\u5e33\u865f\uff1a",Object(z.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(z.jsxs)(ee,{children:["\u5bc6\u78bc\uff1a",Object(z.jsx)("input",{type:"password",value:a,onChange:function(n){return d(n.target.value)}})]}),u&&Object(z.jsx)(re,{children:u}),Object(z.jsxs)(ie,{children:[Object(z.jsx)(oe,{to:"/register",children:"\u8a3b\u518a"}),Object(z.jsx)(te,{type:"submit",children:"\u767b\u5165"})]})]})})})}var ae,se,de,be,le,je,ue,xe,fe,pe=x.a.div(Rn||(Rn=Object(u.a)(["\n  line-height: 2em;\n"]))),he=x.a.div(Zn||(Zn=Object(u.a)(["\n  position: relative;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n"]))),Oe=x.a.div(qn||(qn=Object(u.a)(["\n  text-decoration: none;\n  line-height: 1.8em;\n  color: #495464;\n  display: block;\n  font-size: 1.5em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  margin-right: 0;\n  font-weight: bold;\n"]))),me=x.a.div(Gn||(Gn=Object(u.a)(["\n  background: #495464;\n  color: #f4f4f2;\n  margin-bottom: 10px;\n"]))),ge=x.a.a(Kn||(Kn=Object(u.a)(["\n  margin: 0 20px;\n"]))),ve=x.a.a(Qn||(Qn=Object(u.a)(["\n  margin: 0 20px;\n"])));function we(){var n=Object(s.useState)([]),e=Object(j.a)(n,2),t=e[0],i=e[1],o=Object(p.h)().id;return Object(s.useEffect)((function(){function n(){return(n=Object(Jn.a)(Bn.a.mark((function n(){var e;return Bn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Fn(o);case 2:e=n.sent,i(e);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[o]),Object(z.jsx)(wn.a,{children:t.map((function(n){return Object(z.jsxs)(he,{children:[Object(z.jsx)(Oe,{children:n&&n.title}),Object(z.jsxs)(me,{children:[Object(z.jsx)(ge,{children:n&&new Date(n.createdAt).toLocaleString()}),Object(z.jsx)(ve,{})]}),Object(z.jsx)(pe,{children:n&&n.body})]},o)}))})}var ye,ke,ze,Se,Ce,Pe,Le,Ee,De,$e,Te,Ie,_e,Ae=x.a.form(ae||(ae=Object(u.a)(["\n  width: 80vw;\n  max-width: 576px;\n  box-sizing: border-box;\n  position: relative;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 2em 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),Be=x.a.div(se||(se=Object(u.a)(["\n  align-self: center;\n  color: #495464;\n  font-size: 1.5em;\n"]))),Je=x.a.div(de||(de=Object(u.a)(["\n  z-index: 99;\n  position: fixed;\n  background-color: #e8e8e8;\n  top: -128px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: red;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  font-size: 1.5em;\n  line-height: 2em;\n"]))),Ye=x.a.input(be||(be=Object(u.a)(["\n  width: 100%;\n  margin-top: 3em;\n  height: 2em;\n"]))),Ue=x.a.textarea(le||(le=Object(u.a)(["\n  width: 100%;\n  margin-top: 3em;\n"]))),Fe=x.a.div(je||(je=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"]))),Ne=x.a.button(ue||(ue=Object(u.a)(["\n  width: 20%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),He=x.a.div(xe||(xe=Object(u.a)(["\n  width: 20%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  text-align: center;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),We=x.a.div(fe||(fe=Object(u.a)(["\n  z-index: 99;\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: -128px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: red;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"])));function Xe(){var n=Object(s.useState)(""),e=Object(j.a)(n,2),t=e[0],i=e[1],o=Object(s.useState)(""),r=Object(j.a)(o,2),c=r[0],a=r[1],d=Object(s.useState)(),b=Object(j.a)(d,2),l=b[0],u=b[1],x=Object(s.useContext)(m),f=x.isLoading,h=x.setIsLoading,g=Object(p.f)(),v=function(){u(null)},y=Object(s.useState)(!1),k=Object(j.a)(y,2),S=k[0],C=k[1],P=w();return Object(s.useEffect)((function(){var n;P||(n=3e3,new Promise((function(e){return setTimeout(e,n)}))).then((function(){g.push("/")}))})),P?Object(z.jsxs)(wn.a,{children:[f&&Object(z.jsx)(rn,{}),Object(z.jsx)(O.Provider,{value:{newPostTitle:t,newPostBody:c},children:S&&Object(z.jsx)(We,{onClick:function(){C(!1)},children:Object(z.jsx)(Pn,{})})}),Object(z.jsxs)(Ae,{onSubmit:function(n){n.preventDefault(),h(!0),function(n,e){var t=w();return fetch("".concat(Yn,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"content-type":"application/json"},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(t,c).then((function(n){if(h(!1),0===n.ok)return u(n.message);g.push("/")})).catch((function(n){u(n.message)}))},children:[Object(z.jsx)(Be,{children:"\u65b0\u589e\u6587\u7ae0"}),Object(z.jsx)(Ye,{value:t,placeholder:l||"\u8acb\u8f38\u5165\u6a19\u984c",onChange:function(n){i(n.target.value)},onFocus:v}),Object(z.jsx)(Ue,{value:c,rows:30,placeholder:l||"\u8acb\u8f38\u5165\u5167\u6587",onChange:function(n){a(n.target.value)},onFocus:v}),Object(z.jsxs)(Fe,{children:[Object(z.jsx)(Ne,{children:f?"\u767c\u5e03\u4e2d":"\u9001\u51fa"}),Object(z.jsx)(He,{onClick:function(){C(!0)},children:"\u9810\u89bd"})]})]})]}):Object(z.jsxs)(Je,{children:[Object(z.jsx)("div",{children:"\u8acb\u767b\u5165\u5f8c\u518d\u767c\u65b0\u6587\u7ae0"}),Object(z.jsx)("div",{children:"\u6b63\u5728\u5c07\u60a8\u5c0e\u5411\u9996\u9801"})]})}function Me(){var n=Object(s.useState)([]),e=Object(j.a)(n,2),t=e[0],i=e[1],o=Object(s.useContext)(m),r=o.isLoading,c=o.setIsLoading;Object(s.useEffect)((function(){c(!0),Un().then((function(n){return i(n)})).then((function(){c(!1)}))}),[c]);var a=function(n){(function(n){return fetch("".concat(Yn,"/posts/").concat(n),{method:"DELETE"}).then((function(n){return n.json()}))})(n).then((function(){Un().then((function(n){return i(n)}))})).catch((function(n){console.log(n)})).then(c(!1))};return Object(z.jsxs)(wn.a,{children:[r&&Object(z.jsx)(rn,{}),t.map((function(n){return Object(z.jsx)(xn,{post:n,handleDeletePost:a},n.id)}))]})}xn.propTypes={post:Xn.a.object};var Re,Ze,qe,Ge,Ke,Qe=x.a.form(ye||(ye=Object(u.a)(["\n  width: 70vw;\n  max-width: 576px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin: 20px;\n  padding: 30px 30px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  color: #495464;\n  transition-duration: 0.5s;\n"]))),Ve=x.a.div(ke||(ke=Object(u.a)([""]))),nt=x.a.input(ze||(ze=Object(u.a)(["\n  width: 100%;\n  border: 1px solid #495464;\n  box-sizing: border-box;\n  border-radius: 5px;\n  background: #e8e8e8;\n  margin: 1em;\n  height: 2em;\n  :focus {\n    outline-style: none;\n    background: white;\n  }\n"]))),et=x.a.textarea(Se||(Se=Object(u.a)(["\n  width: 100%;\n  min-height: 10em;\n  padding: 10px;\n  border: 1px solid #495464;\n  box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #e8e8e8;\n  margin: 1em;\n  :focus {\n    outline-style: none;\n    background: white;\n  }\n"]))),tt=x.a.button(Ce||(Ce=Object(u.a)(["\n  font-size: 1em;\n  margin-top: 0.5em;\n  width: 15em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),it=x.a.div(Pe||(Pe=Object(u.a)(["\n  display: flex;\n  margin: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  transition-duration: 0.5s;\n  :hover {\n    background: #e8e8e8;\n    color: #000000;\n    transform: scale(1.2);\n  }\n  "," {\n    padding: 5px 15px;\n  }\n"])),y),ot=x.a.div(Le||(Le=Object(u.a)(["\n  margin-left: 20px;\n  overflow-wrap: anywhere;\n  max-width: 500px;\n"]))),rt=x.a.div(Ee||(Ee=Object(u.a)(["\n  min-width: 50px;\n  height: 50px;\n  width: 50px;\n  border-radius: 50%;\n  background: #e4f0fb;\n  "," {\n    min-width: 25px;\n    height: 25px;\n    width: 25px;\n    border-radius: 50%;\n    margin-top: 0.5em;\n  }\n"])),y),ct=x.a.div(De||(De=Object(u.a)(["\n  display: flex;\n  text-align: left;\n  max-width: 250px;\n  color: black;\n  font-weight: bold;\n  overflow: hidden;\n  align-items: center;\n"]))),at=x.a.div($e||($e=Object(u.a)(["\n  display: flex;\n"]))),st=x.a.span(Te||(Te=Object(u.a)(["\n  color: #a0a0a0;\n  margin-left: 20px;\n  align-items: center;\n  display: flex;\n"]))),dt=x.a.p(Ie||(Ie=Object(u.a)(["\n  margin-top: 20px;\n  max-width: 100%;\n  white-space: break-spaces;\n"]))),bt=x.a.div(_e||(_e=Object(u.a)(["\n  margin: 2em;\n  color: red;\n"])));function lt(n){var e=n.comment;return Object(z.jsx)(wn.a,{children:Object(z.jsxs)(it,{children:[Object(z.jsx)(rt,{}),Object(z.jsxs)(ot,{children:[Object(z.jsxs)(at,{children:[Object(z.jsx)(ct,{children:e.nickname}),Object(z.jsx)(st,{children:new Date(e.createdAt).toLocaleString()})]}),Object(z.jsx)(dt,{children:e.body})]})]})})}function jt(){var n=Object(s.useState)(null),e=Object(j.a)(n,2),t=e[0],i=e[1],o=Object(s.useState)(null),r=Object(j.a)(o,2),c=r[0],a=r[1],d=Object(s.useState)(""),b=Object(j.a)(d,2),l=b[0],u=b[1],x=Object(s.useState)(""),f=Object(j.a)(x,2),p=f[0],h=f[1],O=Object(s.useState)(null),g=Object(j.a)(O,2),v=g[0],w=g[1],y=Object(s.useContext)(m),k=y.isLoading,S=y.setIsLoading,C=function(n){w(null)};return Object(s.useEffect)((function(){var n=!0;return S(!0),Hn().then((function(e){n&&i(e)})).then((function(){S(!1)})).catch((function(e){n&&a(e.message)})),function(){return n=!1}}),[S]),Object(z.jsxs)(wn.a,{children:[k&&Object(z.jsx)(rn,{}),Object(z.jsxs)(Qe,{onSubmit:function(n){n.preventDefault(),k||(S(!0),function(n,e){return fetch("".concat(Yn,"/comments"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,body:e})}).then((function(n){return n.json()}))}(p,l).then((function(n){S(!1),0===n.ok&&w(n.message),u(""),h(""),Hn().then((function(n){i(n)}))})).catch((function(n){S(!1)})))},children:["\u60a8\u7684\u66b1\u7a31\uff1a",Object(z.jsx)(nt,{value:p,onChange:function(n){h(n.target.value)},onFocus:C}),"\u60a8\u7684\u7559\u8a00\uff1a",Object(z.jsx)(et,{value:l,onChange:function(n){u(n.target.value)},onFocus:C,rows:"20"}),v&&Object(z.jsx)(bt,{children:"Your username or comment is empty!"}),Object(z.jsx)(tt,{children:"\u767c\u9001\u7559\u8a00"})]}),c&&Object(z.jsxs)(bt,{children:["Something went wrong.",Object(z.jsx)("br",{}),c.toString()]}),t&&0===t.length&&Object(z.jsx)("h1",{children:"\u76ee\u524d\u6c92\u6709\u7559\u8a00\uff0c\u5feb\u4f86\u65b0\u589e\u5427\uff01"}),Object(z.jsx)(Ve,{children:t&&t.map((function(n){return Object(z.jsx)(lt,{comment:n},n.id)}))})]})}var ut,xt,ft,pt=x.a.div(Re||(Re=Object(u.a)(["\n  position: relative;\n  width: 100%;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  color: #495464;\n  display: flex;\n  justify-content: center;\n"]))),ht=x.a.form(Ze||(Ze=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 300px;\n  margin: 30px;\n"]))),Ot=x.a.div(qe||(qe=Object(u.a)(["\n  align-self: center;\n  font-size: 1em;\n  margin: 1em;\n  border: 2px solid#ffffff;\n  :active {\n    outline: 0;\n  }\n"]))),mt=x.a.button(Ge||(Ge=Object(u.a)(["\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),gt=x.a.a(Ke||(Ke=Object(u.a)(["\n  font-size: 1em;\n  color: red;\n  align-self: center;\n"])));function vt(){var n=Object(s.useContext)(h).setUser,e=Object(s.useState)(""),t=Object(j.a)(e,2),i=t[0],o=t[1],r=Object(s.useState)(""),c=Object(j.a)(r,2),a=c[0],d=c[1],b=Object(s.useState)(""),l=Object(j.a)(b,2),u=l[0],x=l[1],f=Object(s.useState)(),O=Object(j.a)(f,2),m=O[0],g=O[1],w=Object(s.useState)(!1),y=Object(j.a)(w,2),k=y[0],S=y[1],C=Object(p.f)();return Object(z.jsxs)(wn.a,{children:[k&&Object(z.jsx)(rn,{}),Object(z.jsx)(pt,{children:Object(z.jsxs)(ht,{onSubmit:function(e){e.preventDefault(),S(!0),g(null),function(n,e,t){return fetch("".concat(Yn,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(i,a,u).then((function(e){if(0===e.ok)return S(!1),g(e.message);v(e.token),Nn().then((function(e){if(S(!1),1!==e.ok)return v(null),g(e.toString());n(e.data),C.push("/")}))}))},children:[Object(z.jsxs)(Ot,{children:["\u66b1\u7a31\uff1a",Object(z.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(z.jsxs)(Ot,{children:["\u5e33\u865f\uff1a",Object(z.jsx)("input",{value:a,onChange:function(n){return d(n.target.value)}})]}),Object(z.jsxs)(Ot,{children:["\u5bc6\u78bc\uff1a",Object(z.jsx)("input",{type:"password",value:u,onChange:function(n){return x(n.target.value)}})]}),m&&Object(z.jsx)(gt,{children:m}),Object(z.jsx)(mt,{type:"submit",children:"\u8a3b\u518a"})]})})]})}var wt,yt=x.a.div(ut||(ut=Object(u.a)(["\n  width: 100%;\n  border-top: 2px solid #e8e8e8;\n  position: fixed;\n  bottom: 0;\n  padding: 0.5em;\n  background-color: white;\n"]))),kt=x.a.div(xt||(xt=Object(u.a)(["\n  margin: 0 auto;\n  width: 100%;\n  max-width: 1080px;\n  background: #fff;\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n"]))),zt=x.a.span(ft||(ft=Object(u.a)(["\n  font-size: 8px;\n  letter-spacing: 1px;\n  text-decoration: none;\n  color: #495464;\n"])));function St(){return Object(z.jsx)(yt,{children:Object(z.jsx)(kt,{children:Object(z.jsx)(zt,{href:"https://github.com/YiHeng0221",children:"\xa9 2021 YiHeng Powered by React"})})})}var Ct=x.a.div(wt||(wt=Object(u.a)(["\n  margin: 5% auto;\n  box-model: border-box;\n  display: flex;\n  height: 100%;\n  width: 100%;\n  padding-top: 64px;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  "," {\n    padding-top: 128px;\n  }\n  "," {\n    padding-top: 100px;\n  }\n"])),y,k);var Pt=function(){var n=Object(s.useState)(null),e=Object(j.a)(n,2),t=e[0],i=e[1],o=Object(s.useState)(!1),r=Object(j.a)(o,2),c=r[0],a=r[1];return Object(s.useEffect)((function(){a(!0),w()?Nn().then((function(n){n.ok&&(i(n.data),a(!1))})):a(!1)}),[]),Object(z.jsx)(h.Provider,{value:{user:t,setUser:i},children:Object(z.jsxs)(f.a,{children:[Object(z.jsx)(R,{}),Object(z.jsxs)(Ct,{children:[Object(z.jsxs)(m.Provider,{value:{isLoading:c,setIsLoading:a},children:[c&&Object(z.jsx)(rn,{}),Object(z.jsxs)(p.c,{children:[Object(z.jsx)(p.a,{exact:!0,path:"/",children:Object(z.jsx)(Mn,{})}),Object(z.jsx)(p.a,{exact:!0,path:"/posts",children:Object(z.jsx)(Me,{})}),Object(z.jsx)(p.a,{exact:!0,path:"/login",children:Object(z.jsx)(ce,{})}),Object(z.jsx)(p.a,{exact:!0,path:"/newpost",children:Object(z.jsx)(Xe,{})}),Object(z.jsx)(p.a,{exact:!0,path:"/post/:id",children:Object(z.jsx)(we,{})}),Object(z.jsx)(p.a,{exact:!0,path:"/board",children:Object(z.jsx)(jt,{})}),Object(z.jsx)(p.a,{exact:!0,path:"/register",children:Object(z.jsx)(vt,{})})]})]}),Object(z.jsx)(St,{})]})]})})};l.a.render(Object(z.jsx)(d.a.StrictMode,{children:Object(z.jsx)(Pt,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.a6d7002f.chunk.js.map