(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{38:function(n,e,t){"use strict";t.r(e);var i,o,r,c,a,s,d,b,l=t(1),j=t.n(l),x=t(21),u=t.n(x),p=t(4),f=t(2),h=t(3),O=t(7),m=t(5),g=Object(l.createContext)(null),v=Object(l.createContext)(null),w=Object(l.createContext)(null),y="token",k=function(n){localStorage.setItem(y,n)},S=function(){return localStorage.getItem(y)},z=t(0),C=h.a.div(i||(i=Object(f.a)(["\n  height: 128px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  position: fixed;\n  top: 0;\n  right: 0;\n  left: 0;\n  border-bottom: 1px solid lightgrey;\n  z-index: 99;\n  background: white;\n"]))),P=h.a.div(o||(o=Object(f.a)(["\n  display: flex;\n  align-items: center;\n"]))),L=Object(h.a)(O.b)(r||(r=Object(f.a)(["\n  font-size: 2.5em;\n  margin: 30px;\n  cursor: pointer;\n  color: #495464;\n  text-decoration: none;\n"]))),D=Object(h.a)(O.b)(c||(c=Object(f.a)(["\n  text-decoration: none;\n  display: flex;\n  margin: 20px;\n  padding: 10px;\n  font-size: 1em;\n  cursor: pointer;\n  border-radius: 5px;\n  color: #495464;\n  transition: all 0.3s;\n  :hover {\n    background: #e8e8e8;\n    cursor: pointer;\n    color: #000000;\n    transform: scale(1.2);\n  }\n  ","\n"])),(function(n){return n.$active&&"\n  background: #e8e8e8;\n  "})),E=h.a.div(a||(a=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  margin: 20px;\n  color: #495464;\n"])));function T(){var n=Object(m.g)(),e=Object(l.useContext)(g),t=e.user,i=e.setUser,o=Object(m.f)();return Object(z.jsxs)(C,{children:[Object(z.jsxs)(P,{children:[Object(z.jsx)(L,{to:"/",children:"Heng's Blog"}),Object(z.jsx)(D,{to:"/posts",$active:"/posts"===n.pathname,children:"\u6240\u6709\u6587\u7ae0"}),t&&Object(z.jsx)(D,{to:"/newPost",$active:"/newPost"===n.pathname,children:"\u65b0\u589e\u6587\u7ae0"}),Object(z.jsx)(D,{to:"/board",$active:"/board"===n.pathname,children:"\u7559\u8a00\u677f"})]}),!t&&Object(z.jsxs)(E,{children:[Object(z.jsx)(D,{to:"/login",$active:"/login"===n.pathname,children:"\u767b\u5165"}),Object(z.jsx)(D,{to:"/register",$active:"/register"===n.pathname,children:"\u8a3b\u518a"})]}),t&&Object(z.jsx)(E,{children:Object(z.jsx)(D,{to:"/",onClick:function(){k(""),i(null),"/"!==n.pathname&&o.push("/")},children:"\u767b\u51fa"})})]})}var I,_,A,B,J,$,F,N=h.a.div(s||(s=Object(f.a)(["\n  z-index: 99;\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.7);\n  color: white;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 3em;\n"]))),U=Object(h.b)(d||(d=Object(f.a)(["\n  0%, 100% {\n    animation-timing-function: cubic-bezier(0.5, 0, 1, 0.5);\n  }\n  0% {\n    transform: rotateY(0deg);\n  }\n  50% {\n    transform: rotateY(1800deg);\n    animation-timing-function: cubic-bezier(0, 0.5, 0.5, 1);\n  }\n  100% {\n    transform: rotateY(3600deg);\n  }\n"]))),Y=h.a.div(b||(b=Object(f.a)(["\ndisplay: inline-block;\ntransform: translateZ(1px);\n  animation: "," 5s linear infinite;\n  div {\n    display: inline-block;\n  width: 64px;\n  height: 64px;\n  margin: 8px;\n  border-radius: 50%;\n  background: #fff;\n  animation: lds-circle 2.4s cubic-bezier(0, 0.2, 0.8, 1) infinite;\n}\n    }\n    :nth-child(2) {\n      top: 8px;\n      left: 32px;\n      animation-delay: -0.4s;\n    }\n    :nth-child(3) {\n      top: 8px;\n      left: 56px;\n      animation-delay: -0.8s;\n    }\n    :nth-child(4) {\n      top: 32px;\n      left: 8px;\n      animation-delay: -0.4s;\n    }\n    :nth-child(5) {\n      top: 32px;\n      left: 32px;\n      animation-delay: -0.8s;\n    }\n    :nth-child(6) {\n      top: 32px;\n      left: 56px;\n      animation-delay: -1.2s;\n    }\n    :nth-child(7) {\n      top: 56px;\n      left: 8px;\n      animation-delay: -0.8s;\n    }\n    :nth-child(8) {\n      top: 56px;\n      left: 32px;\n      animation-delay: -1.2s;\n    }\n    :nth-child(9) {\n      top: 56px;\n      left: 56px;\n      animation-delay: -1.6s;\n    }\n  }\n"])),U);function H(){return Object(z.jsx)(N,{children:Object(z.jsx)(Y,{children:Object(z.jsx)("div",{})})})}var M=h.a.div(I||(I=Object(f.a)(["\n  position: relative;\n  max-width: 645px;\n  margin: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  transition-duration: 0.5s;\n  :hover {\n    background: #e8e8e8;\n    cursor: pointer;\n    color: #000000;\n    transform: scale(1.2);\n  }\n"]))),Z=h.a.div(_||(_=Object(f.a)(["\n  display: block;\n  text-decoration: none;\n  line-height: 1.8em;\n  color: #495464;\n  font-size: 1.5em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  margin-right: 0;\n  font-weight: bold;\n"]))),q=h.a.div(A||(A=Object(f.a)(["\n  background: #495464;\n  color: #f4f4f2;\n  margin-bottom: 10px;\n"]))),G=h.a.div(B||(B=Object(f.a)(["\n  margin: 0 20px;\n"]))),K={textDecoration:"none"},Q=h.a.div(J||(J=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n"]))),R=Object(h.a)(O.b)($||($=Object(f.a)(['\n  text-decoration: none;\n  line-height: 1.5em;\n  color: #495464;\n  display: block;\n  font-size: 1em;\n  margin: 0.5em;\n  box-sizing: border-box;\n  font-weight: bold;\n  textdecoration: "none";\n']))),V=h.a.div(F||(F=Object(f.a)(["\n  min-width: 5%;\n  font-size: 1em;\n  background-color: #f38181;\n  border-radius: 10px;\n  padding: 0.5em;\n  color: white;\n  cursor: pointer;\n"])));function W(n){var e=n.post,t=n.handleDeletePost,i=Object(l.useContext)(g).user;return Object(z.jsx)(M,{children:Object(z.jsxs)(Q,{children:[Object(z.jsx)(R,{to:"/post/".concat(e.id),children:e.title}),i&&i.id===e.userId&&Object(z.jsx)(V,{onClick:function(){return t(e.id)},children:"\u522a\u9664"})]})},e.id)}function X(n){var e=n.post;return Object(z.jsx)(M,{children:Object(z.jsxs)(O.b,{to:"/post/".concat(e.id),style:K,children:[Object(z.jsx)(Z,{children:e.title}),Object(z.jsx)(q,{children:Object(z.jsx)(G,{children:new Date(e.createdAt).toLocaleString()})})]})},e.id)}var nn,en,tn,on,rn,cn=t(6),an=t.n(cn),sn=h.a.div(nn||(nn=Object(f.a)(["\n  margin-top: 256px;\n  width: 645px;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  opacity: 100%;\n  background-color: white;\n  min-height: 300px;\n  overflow: scroll;\n"]))),dn=h.a.div(en||(en=Object(f.a)(["\n  text-decoration: none;\n  line-height: 1.8em;\n  color: #495464;\n  display: block;\n  font-size: 1.5em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  margin-right: 0;\n  font-weight: bold;\n"]))),bn=h.a.div(tn||(tn=Object(f.a)(["\n  background: #495464;\n  color: #f4f4f2;\n  margin-bottom: 10px;\n"]))),ln=h.a.a(on||(on=Object(f.a)(["\n  margin: 0 20px;\n"]))),jn=h.a.div(rn||(rn=Object(f.a)(["\n  line-height: 2em;\n"])));function xn(){var n=Object(l.useContext)(v),e=n.newPostTitle,t=n.newPostBody,i=(new Date).toLocaleString();return Object(z.jsx)(an.a,{children:Object(z.jsxs)(sn,{children:[Object(z.jsx)(dn,{children:e}),Object(z.jsx)(bn,{children:Object(z.jsx)(ln,{children:i})}),Object(z.jsx)(jn,{children:t})]})})}var un,pn,fn,hn,On,mn,gn,vn,wn=t(11),yn=t.n(wn),kn=t(14),Sn="https://student-json-api.lidemy.me",zn=function(n){return n?fetch("".concat(Sn,"/posts?_sort=createdAt&_order=desc&_limit=").concat(n)).then((function(n){return n.json()})):fetch("".concat(Sn,"/posts?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},Cn=function(){var n=Object(kn.a)(yn.a.mark((function n(e){var t,i;return yn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat(Sn,"/posts?id=").concat(e));case 2:return t=n.sent,n.next=5,t.json();case 5:return i=n.sent,n.abrupt("return",i);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),Pn=function(){var n=S();return fetch("".concat(Sn,"/me"),{headers:{authorization:"Bearer ".concat(n)}}).then((function(n){return n.json()}))},Ln=function(){return fetch("".concat(Sn,"/comments?_sort=createdAt&_order=desc")).then((function(n){return n.json()}))},Dn=t(10),En=t.n(Dn),Tn=h.a.div(un||(un=Object(f.a)(["\n  position: relative;\n  min-height: 100vh;\n  margin: auto;\n  border-radius: 5px;\n  padding: 10px 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])));function In(){var n=Object(l.useState)([]),e=Object(p.a)(n,2),t=e[0],i=e[1],o=Object(l.useContext)(w),r=o.isLoading,c=o.setIsLoading;return Object(l.useEffect)((function(){c(!0),zn(5).then((function(n){i(n)})).then((function(){c(!1)}))}),[c]),Object(z.jsx)(Tn,{children:Object(z.jsxs)(an.a,{children:[r&&Object(z.jsx)(H,{}),t.map((function(n){return Object(z.jsx)(X,{post:n},n.id)}))]})})}X.propTypes={post:En.a.object};var _n,An,Bn,Jn,$n,Fn,Nn,Un=h.a.div(pn||(pn=Object(f.a)(["\n  position: relative;\n  min-width: 645px;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  display: flex;\n  justify-content: center;\n"]))),Yn=h.a.form(fn||(fn=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n"]))),Hn=h.a.div(hn||(hn=Object(f.a)(["\n  align-self: center;\n  font-size: 1em;\n  margin: 1em;\n  border: 2px solid#ffffff;\n  :active {\n    outline: 0;\n  }\n"]))),Mn=h.a.button(On||(On=Object(f.a)(["\n  width: 50%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),Zn=h.a.div(mn||(mn=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-item: center;\n"]))),qn=Object(h.a)(O.b)(gn||(gn=Object(f.a)(["\n  width: 50%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  text-align: center;\n  text-decoration: none;\n  color: black;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),Gn=h.a.a(vn||(vn=Object(f.a)(["\n  font-size: 1em;\n  color: red;\n  align-self: center;\n"])));function Kn(){var n=Object(l.useContext)(g).setUser,e=Object(l.useState)(""),t=Object(p.a)(e,2),i=t[0],o=t[1],r=Object(l.useState)(""),c=Object(p.a)(r,2),a=c[0],s=c[1],d=Object(l.useState)(),b=Object(p.a)(d,2),j=b[0],x=b[1],u=Object(m.f)();return Object(z.jsx)(an.a,{children:Object(z.jsx)(Un,{children:Object(z.jsxs)(Yn,{onSubmit:function(e){x(null),function(n,e){return fetch("".concat(Sn,"/login"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({username:n,password:e})}).then((function(n){return n.json()}))}(i,a).then((function(e){if(0===e.ok)return x(e.message);k(e.token),Pn().then((function(e){if(1!==e.ok)return k(null),x(e.toString());n(e.data),u.push("/")}))}))},children:[Object(z.jsxs)(Hn,{children:["\u5e33\u865f\uff1a",Object(z.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(z.jsxs)(Hn,{children:["\u5bc6\u78bc\uff1a",Object(z.jsx)("input",{type:"password",value:a,onChange:function(n){return s(n.target.value)}})]}),j&&Object(z.jsx)(Gn,{children:j}),Object(z.jsxs)(Zn,{children:[Object(z.jsx)(qn,{to:"/register",children:"\u8a3b\u518a"}),Object(z.jsx)(Mn,{type:"submit",children:"\u767b\u5165"})]})]})})})}var Qn,Rn,Vn,Wn,Xn,ne,ee,te,ie,oe,re=h.a.div(_n||(_n=Object(f.a)(["\n  position: relative;\n  flex: 1;\n  min-width: 645px;\n  max-width: 700px;\n  margin: auto;\n  border-radius: 5px;\n  padding: 10px 10px;\n"]))),ce=h.a.div(An||(An=Object(f.a)(["\n  line-height: 2em;\n"]))),ae=h.a.div(Bn||(Bn=Object(f.a)(["\n  position: relative;\n  min-width: 645px;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n"]))),se=h.a.div(Jn||(Jn=Object(f.a)(["\n  text-decoration: none;\n  line-height: 1.8em;\n  color: #495464;\n  display: block;\n  font-size: 1.5em;\n  margin-top: 1em;\n  margin-bottom: 1em;\n  margin-left: 0;\n  margin-right: 0;\n  font-weight: bold;\n"]))),de=h.a.div($n||($n=Object(f.a)(["\n  background: #495464;\n  color: #f4f4f2;\n  margin-bottom: 10px;\n"]))),be=h.a.a(Fn||(Fn=Object(f.a)(["\n  margin: 0 20px;\n"]))),le=h.a.a(Nn||(Nn=Object(f.a)(["\n  margin: 0 20px;\n"])));function je(){var n=Object(l.useState)([]),e=Object(p.a)(n,2),t=e[0],i=e[1],o=Object(m.h)().id;return Object(l.useEffect)((function(){function n(){return(n=Object(kn.a)(yn.a.mark((function n(){var e;return yn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Cn(o);case 2:e=n.sent,i(e);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}!function(){n.apply(this,arguments)}()}),[o]),Object(z.jsx)(re,{children:Object(z.jsx)(an.a,{children:t.map((function(n){return Object(z.jsxs)(ae,{children:[Object(z.jsx)(se,{children:n&&n.title}),Object(z.jsxs)(de,{children:[Object(z.jsx)(be,{children:n&&new Date(n.createdAt).toLocaleString()}),Object(z.jsx)(le,{})]}),Object(z.jsx)(ce,{children:n&&n.body})]},o)}))})})}var xe,ue=h.a.div(Qn||(Qn=Object(f.a)(["\n  position: relative;\n  flex: 1;\n  min-width: 645px;\n  max-width: 700px;\n  margin: auto;\n  border-radius: 5px;\n  padding: 10px 10px;\n"]))),pe=h.a.form(Rn||(Rn=Object(f.a)(["\n  box-sizing: border-box;\n  position: relative;\n  min-width: 645px;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 2em 2em;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"]))),fe=h.a.div(Vn||(Vn=Object(f.a)(["\n  align-self: center;\n  color: #495464;\n  font-size: 1.5em;\n"]))),he=h.a.div(Wn||(Wn=Object(f.a)(["\n  z-index: 99;\n  position: fixed;\n  background-color: #e8e8e8;\n  top: -128px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: red;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  font-size: 1.5em;\n  line-height: 2em;\n"]))),Oe=h.a.input(Xn||(Xn=Object(f.a)(["\n  width: 100%;\n  margin-top: 3em;\n  height: 2em;\n"]))),me=h.a.textarea(ne||(ne=Object(f.a)(["\n  width: 100%;\n  margin-top: 3em;\n"]))),ge=h.a.div(ee||(ee=Object(f.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n"]))),ve=h.a.button(te||(te=Object(f.a)(["\n  width: 20%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),we=h.a.div(ie||(ie=Object(f.a)(["\n  width: 20%;\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  text-align: center;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),ye=h.a.div(oe||(oe=Object(f.a)(["\n  z-index: 99;\n  position: fixed;\n  background-color: rgba(0, 0, 0, 0.5);\n  top: -128px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  color: red;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n"])));function ke(){var n=Object(l.useState)(""),e=Object(p.a)(n,2),t=e[0],i=e[1],o=Object(l.useState)(""),r=Object(p.a)(o,2),c=r[0],a=r[1],s=Object(l.useState)(),d=Object(p.a)(s,2),b=d[0],j=d[1],x=Object(l.useContext)(w),u=x.isLoading,f=x.setIsLoading,h=Object(m.f)(),O=function(){j(null)},g=Object(l.useState)(!1),y=Object(p.a)(g,2),k=y[0],C=y[1],P=S();return Object(l.useEffect)((function(){var n;P||(n=3e3,new Promise((function(e){return setTimeout(e,n)}))).then((function(){h.push("/")}))})),P?Object(z.jsx)(ue,{children:Object(z.jsxs)(an.a,{children:[u&&Object(z.jsx)(H,{}),Object(z.jsx)(v.Provider,{value:{newPostTitle:t,newPostBody:c},children:k&&Object(z.jsx)(ye,{onClick:function(){C(!1)},children:Object(z.jsx)(xn,{})})}),Object(z.jsxs)(pe,{onSubmit:function(n){n.preventDefault(),f(!0),function(n,e){var t=S();return fetch("".concat(Sn,"/posts"),{method:"POST",headers:{authorization:"Bearer ".concat(t),"content-type":"application/json"},body:JSON.stringify({title:n,body:e})}).then((function(n){return n.json()}))}(t,c).then((function(n){if(f(!1),0===n.ok)return j(n.message);h.push("/")})).catch((function(n){j(n.message)}))},children:[Object(z.jsx)(fe,{children:"\u65b0\u589e\u6587\u7ae0"}),Object(z.jsx)(Oe,{value:t,placeholder:b||"\u8acb\u8f38\u5165\u6a19\u984c",onChange:function(n){i(n.target.value)},onFocus:O}),Object(z.jsx)(me,{value:c,rows:30,placeholder:b||"\u8acb\u8f38\u5165\u5167\u6587",onChange:function(n){a(n.target.value)},onFocus:O}),Object(z.jsxs)(ge,{children:[Object(z.jsx)(ve,{children:u?"\u767c\u5e03\u4e2d":"\u9001\u51fa"}),Object(z.jsx)(we,{onClick:function(){C(!0)},children:"\u9810\u89bd"})]})]})]})}):Object(z.jsxs)(he,{children:[Object(z.jsx)("div",{children:"\u8acb\u767b\u5165\u5f8c\u518d\u767c\u65b0\u6587\u7ae0"}),Object(z.jsx)("div",{children:"\u6b63\u5728\u5c07\u60a8\u5c0e\u5411\u9996\u9801"})]})}var Se,ze,Ce,Pe,Le,De,Ee,Te,Ie,_e,Ae,Be,Je,$e,Fe=h.a.div(xe||(xe=Object(f.a)(["\n  position: relative;\n  min-height: 100vh;\n  margin: auto;\n  border-radius: 5px;\n  padding: 10px 10px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"])));function Ne(){var n=Object(l.useState)([]),e=Object(p.a)(n,2),t=e[0],i=e[1],o=Object(l.useContext)(w),r=o.isLoading,c=o.setIsLoading;Object(l.useEffect)((function(){c(!0),zn().then((function(n){return i(n)})).then((function(){c(!1)}))}),[c]);var a=function(n){(function(n){return fetch("".concat(Sn,"/posts/").concat(n),{method:"DELETE"}).then((function(n){return n.json()}))})(n).then((function(){zn().then((function(n){return i(n)}))})).catch((function(n){console.log(n)})).then(c(!1))};return Object(z.jsx)(Fe,{children:Object(z.jsxs)(an.a,{children:[r&&Object(z.jsx)(H,{}),t.map((function(n){return Object(z.jsx)(W,{post:n,handleDeletePost:a},n.id)}))]})})}W.propTypes={post:En.a.object};var Ue,Ye,He,Me,Ze,qe=h.a.div(Se||(Se=Object(f.a)(["\n  margin: 2% auto;\n  max-width: 650px;\n  display: flex;\n  justify-content: center;\n  flex-direction: column;\n"]))),Ge=h.a.form(ze||(ze=Object(f.a)(["\n  position: relative;\n  max-width: 645px;\n  margin: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  padding-top: 2em;\n  color: #495464;\n  transition-duration: 0.5s;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),Ke=h.a.div(Ce||(Ce=Object(f.a)([""]))),Qe=h.a.input(Pe||(Pe=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #495464;\n  box-sizing: border-box;\n  border-radius: 5px;\n  background: #e8e8e8;\n  margin: 1em;\n  height: 2em;\n  :focus {\n    outline-style: none;\n    background: white;\n  }\n"]))),Re=h.a.textarea(Le||(Le=Object(f.a)(["\n  width: 100%;\n  min-height: 10em;\n  padding: 10px;\n  border: 1px solid #495464;\n  box-sizing: border-box;\n  border-radius: 5px;\n  background-color: #e8e8e8;\n  margin: 1em;\n  :focus {\n    outline-style: none;\n    background: white;\n  }\n"]))),Ve=h.a.button(De||(De=Object(f.a)(["\n  font-size: 1em;\n  margin-top: 0.5em;\n  width: 15em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),We=h.a.div(Ee||(Ee=Object(f.a)(["\n  position: relative;\n  max-width: 645px;\n  margin: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  transition-duration: 0.5s;\n  display: flex;\n  :hover {\n    background: #e8e8e8;\n    color: #000000;\n    transform: scale(1.2);\n  }\n"]))),Xe=h.a.div(Te||(Te=Object(f.a)(["\n  margin-left: 20px;\n  overflow-wrap: anywhere;\n  max-width: 500px;\n"]))),nt=h.a.div(Ie||(Ie=Object(f.a)(["\n  min-width: 50px;\n  height: 50px;\n  width: 50px;\n  border-radius: 50%;\n  background: #e4f0fb;\n"]))),et=h.a.div(_e||(_e=Object(f.a)(["\n  display: flex;\n  text-align: left;\n  max-width: 250px;\n  color: black;\n  font-weight: bold;\n  overflow: hidden;\n  align-items: center;\n"]))),tt=h.a.div(Ae||(Ae=Object(f.a)(["\n  display: flex;\n"]))),it=h.a.span(Be||(Be=Object(f.a)(["\n  color: #a0a0a0;\n  margin-left: 20px;\n  align-items: center;\n  display: flex;\n"]))),ot=h.a.p(Je||(Je=Object(f.a)(["\n  margin-top: 20px;\n  max-width: 100%;\n  white-space: break-spaces;\n"]))),rt=h.a.div($e||($e=Object(f.a)(["\n  margin: 2em;\n  color: red;\n"])));function ct(n){var e=n.comment;n.handleCommentDelete;return Object(z.jsx)(an.a,{children:Object(z.jsxs)(We,{children:[Object(z.jsx)(nt,{}),Object(z.jsxs)(Xe,{children:[Object(z.jsxs)(tt,{children:[Object(z.jsx)(et,{children:e.nickname}),Object(z.jsx)(it,{children:new Date(e.createdAt).toLocaleString()})]}),Object(z.jsx)(ot,{children:e.body})]})]})})}function at(){var n=Object(l.useState)(null),e=Object(p.a)(n,2),t=e[0],i=e[1],o=Object(l.useState)(null),r=Object(p.a)(o,2),c=r[0],a=r[1],s=Object(l.useState)(""),d=Object(p.a)(s,2),b=d[0],j=d[1],x=Object(l.useState)(""),u=Object(p.a)(x,2),f=u[0],h=u[1],O=Object(l.useState)(null),m=Object(p.a)(O,2),g=m[0],v=m[1],w=Object(l.useState)(!1),y=Object(p.a)(w,2),k=y[0],S=y[1],C=function(n){v(null)};return Object(l.useEffect)((function(){var n=!0;return Ln().then((function(e){n&&i(e)})).catch((function(e){n&&a(e.message)})),function(){return n=!1}}),[]),Object(z.jsx)(qe,{children:Object(z.jsxs)(an.a,{children:[k&&Object(z.jsx)(H,{}),Object(z.jsxs)(Ge,{onSubmit:function(n){n.preventDefault(),k||(S(!0),function(n,e){return fetch("".concat(Sn,"/comments"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,body:e})}).then((function(n){return n.json()}))}(f,b).then((function(n){S(!1),0===n.ok&&v(n.message),j(""),h(""),Ln()})).catch((function(n){S(!1)})))},children:["\u60a8\u7684\u66b1\u7a31\uff1a",Object(z.jsx)(Qe,{value:f,onChange:function(n){h(n.target.value)},onFocus:C}),"\u60a8\u7684\u7559\u8a00\uff1a",Object(z.jsx)(Re,{value:b,onChange:function(n){j(n.target.value)},onFocus:C,rows:"20"}),g&&Object(z.jsx)(rt,{children:"Your username or comment is empty!"}),Object(z.jsx)(Ve,{children:"\u767c\u9001\u7559\u8a00"})]}),c&&Object(z.jsxs)(rt,{children:["Something went wrong.",Object(z.jsx)("br",{}),c.toString()]}),t&&0===t.length&&Object(z.jsx)("h1",{children:"\u76ee\u524d\u6c92\u6709\u7559\u8a00\uff0c\u5feb\u4f86\u65b0\u589e\u5427\uff01"}),Object(z.jsx)(Ke,{children:t&&t.map((function(n){return Object(z.jsx)(ct,{comment:n},n.id)}))})]})})}var st,dt=h.a.div(Ue||(Ue=Object(f.a)(["\n  position: relative;\n  min-width: 645px;\n  margin-bottom: 20px;\n  border: #bbbfca 1px solid;\n  border-radius: 5px;\n  box-shadow: 1.8px 2.4px 5px 0 rgba(0, 0, 0, 0.3);\n  padding: 10px 30px;\n  color: #495464;\n  display: flex;\n  justify-content: center;\n"]))),bt=h.a.form(Ye||(Ye=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 300px;\n"]))),lt=h.a.div(He||(He=Object(f.a)(["\n  align-self: center;\n  font-size: 1em;\n  margin: 1em;\n  border: 2px solid#ffffff;\n  :active {\n    outline: 0;\n  }\n"]))),jt=h.a.button(Me||(Me=Object(f.a)(["\n  font-size: 1em;\n  margin: 1em;\n  background-color: #e8e8e8;\n  border: 2px solid #ffffff;\n  border-radius: 10px;\n  padding: 0.5em;\n  transition: all 0.4s;\n  box-sizing: border-box;\n  :hover {\n    background-color: #ffffff;\n    border: 2px solid #e8e8e8;\n    cursor: pointer;\n  }\n  :focus {\n    outline: 0;\n  }\n"]))),xt=h.a.a(Ze||(Ze=Object(f.a)(["\n  font-size: 1em;\n  color: red;\n  align-self: center;\n"])));function ut(){var n=Object(l.useContext)(g).setUser,e=Object(l.useState)(""),t=Object(p.a)(e,2),i=t[0],o=t[1],r=Object(l.useState)(""),c=Object(p.a)(r,2),a=c[0],s=c[1],d=Object(l.useState)(""),b=Object(p.a)(d,2),j=b[0],x=b[1],u=Object(l.useState)(),f=Object(p.a)(u,2),h=f[0],O=f[1],v=Object(l.useState)(!1),w=Object(p.a)(v,2),y=w[0],S=w[1],C=Object(m.f)();return Object(z.jsxs)(an.a,{children:[y&&Object(z.jsx)(H,{}),Object(z.jsx)(dt,{children:Object(z.jsxs)(bt,{onSubmit:function(e){e.preventDefault(),S(!0),O(null),function(n,e,t){return fetch("".concat(Sn,"/register"),{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({nickname:n,username:e,password:t})}).then((function(n){return n.json()}))}(i,a,j).then((function(e){if(0===e.ok)return S(!1),O(e.message);k(e.token),Pn().then((function(e){if(S(!1),1!==e.ok)return k(null),O(e.toString());n(e.data),C.push("/")}))}))},children:[Object(z.jsxs)(lt,{children:["\u66b1\u7a31\uff1a",Object(z.jsx)("input",{value:i,onChange:function(n){return o(n.target.value)}})]}),Object(z.jsxs)(lt,{children:["\u5e33\u865f\uff1a",Object(z.jsx)("input",{value:a,onChange:function(n){return s(n.target.value)}})]}),Object(z.jsxs)(lt,{children:["\u5bc6\u78bc\uff1a",Object(z.jsx)("input",{type:"password",value:j,onChange:function(n){return x(n.target.value)}})]}),h&&Object(z.jsx)(xt,{children:h}),Object(z.jsx)(jt,{type:"submit",children:"\u8a3b\u518a"})]})})]})}var pt=h.a.div(st||(st=Object(f.a)(["\n  padding-top: 128px;\n"])));var ft=function(){var n=Object(l.useState)(null),e=Object(p.a)(n,2),t=e[0],i=e[1],o=Object(l.useState)(!1),r=Object(p.a)(o,2),c=r[0],a=r[1];return Object(l.useEffect)((function(){a(!0),S()?Pn().then((function(n){n.ok&&(i(n.data),a(!1))})):a(!1)}),[]),Object(z.jsx)(g.Provider,{value:{user:t,setUser:i},children:Object(z.jsx)(pt,{children:Object(z.jsxs)(O.a,{children:[Object(z.jsx)(T,{}),Object(z.jsxs)(w.Provider,{value:{isLoading:c,setIsLoading:a},children:[c&&Object(z.jsx)(H,{}),Object(z.jsxs)(m.c,{children:[Object(z.jsx)(m.a,{exact:!0,path:"/",children:Object(z.jsx)(In,{})}),Object(z.jsx)(m.a,{exact:!0,path:"/posts",children:Object(z.jsx)(Ne,{})}),Object(z.jsx)(m.a,{exact:!0,path:"/login",children:Object(z.jsx)(Kn,{})}),Object(z.jsx)(m.a,{exact:!0,path:"/newpost",children:Object(z.jsx)(ke,{})}),Object(z.jsx)(m.a,{exact:!0,path:"/post/:id",children:Object(z.jsx)(je,{})}),Object(z.jsx)(m.a,{exact:!0,path:"/board",children:Object(z.jsx)(at,{})}),Object(z.jsx)(m.a,{exact:!0,path:"/register",children:Object(z.jsx)(ut,{})})]})]})]})})})};u.a.render(Object(z.jsx)(j.a.StrictMode,{children:Object(z.jsx)(ft,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.6852ddf3.chunk.js.map